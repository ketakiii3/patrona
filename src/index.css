/* ─────────────────────────────────────────────
   QUIET WALK — Minimalist Design System
───────────────────────────────────────────── */

/* ─────────────────────────────────────────────
   DESIGN TOKENS — DARK THEME (default)
───────────────────────────────────────────── */
:root,
[data-theme="dark"] {
  --bg:       #111110;
  --surface:  #1c1b18;
  --accent:   #87a696;
  --text:     #e8e4dd;
  --text-2:   #8c8680;
  --text-3:   #4a4642;
  --border:   rgba(255, 255, 255, 0.07);
  --alert:    #c08060;
  --green:    #7aab8f;

  /* Derived */
  --surface2:    #242320;
  --border2:     rgba(255, 255, 255, 0.04);
  --text-dim:    var(--text-2);
  --text-muted:  var(--text-3);
  --purple-soft: var(--accent);

  font-family: 'DM Sans', system-ui, sans-serif;
  color: var(--text);
  background-color: var(--bg);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ─────────────────────────────────────────────
   DESIGN TOKENS — LIGHT THEME
───────────────────────────────────────────── */
[data-theme="light"] {
  --bg:       #f7f5f2;
  --surface:  #edebe6;
  --accent:   #4e7d6a;
  --text:     #1e1c1a;
  --text-2:   #706a62;
  --text-3:   #b0a89e;
  --border:   rgba(0, 0, 0, 0.07);
  --alert:    #a05c35;
  --green:    #3d7a5c;

  /* Derived */
  --surface2:    #e4e1da;
  --border2:     rgba(0, 0, 0, 0.04);
  --text-dim:    var(--text-2);
  --text-muted:  var(--text-3);
  --purple-soft: var(--accent);

  background-color: var(--bg);
  color: var(--text);
}

/* ─────────────────────────────────────────────
   GLOBAL RESET
───────────────────────────────────────────── */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html, body, #root {
  height: 100%;
  width: 100%;
  overflow: hidden;
}

body {
  background: var(--bg);
}

@supports (overscroll-behavior: none) {
  body {
    overscroll-behavior: none;
  }
}

/* ─────────────────────────────────────────────
   KEYFRAME ANIMATIONS — keep only these four
───────────────────────────────────────────── */

/* Screen entrance */
@keyframes fadeInUp {
  from { opacity: 0; }
  to   { opacity: 1; }
}

/* Waveform bar dance */
@keyframes waveBar {
  0%, 100% { height: 4px;  opacity: 0.35; }
  50%       { height: 24px; opacity: 1; }
}

/* Pulse dot (active session indicator) */
@keyframes pulseDot {
  0%, 100% { transform: scale(1);   opacity: 1; }
  50%       { transform: scale(1.5); opacity: 0.5; }
}

/* Scale pop for arrived/success states */
@keyframes scalePop {
  0%   { transform: scale(0.88); opacity: 0; }
  60%  { transform: scale(1.04); opacity: 1; }
  100% { transform: scale(1);    opacity: 1; }
}

/* Spin for loading spinner */
@keyframes spin {
  to { transform: rotate(360deg); }
}

/* ─────────────────────────────────────────────
   SCREEN WRAPPER
───────────────────────────────────────────── */
.screen {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  animation: fadeInUp 0.25s ease forwards;
  z-index: 1;
  overflow-y: auto;
  overflow-x: hidden;
}

.screen-static {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  z-index: 1;
}

/* ─────────────────────────────────────────────
   FONT UTILITY
───────────────────────────────────────────── */
.font-brand {
  font-family: 'Lora', Georgia, serif;
  font-style: italic;
}

/* ─────────────────────────────────────────────
   LABEL
───────────────────────────────────────────── */
.label-xs {
  font-size: 11px;
  font-weight: 500;
  letter-spacing: 0.07em;
  text-transform: uppercase;
  color: var(--text-3);
}

/* ─────────────────────────────────────────────
   INPUTS
───────────────────────────────────────────── */
.sw-input {
  width: 100%;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 14px 16px;
  color: var(--text);
  font-family: 'DM Sans', sans-serif;
  font-size: 15px;
  font-weight: 400;
  outline: none;
  transition: border-color 0.2s ease;
  -webkit-appearance: none;
  appearance: none;
}

.sw-input:focus {
  border-color: var(--accent);
}

.sw-input::placeholder {
  color: var(--text-3);
  font-weight: 400;
}

/* ─────────────────────────────────────────────
   BUTTONS
───────────────────────────────────────────── */

/* Primary — full-width pill, sage green */
.btn-primary {
  width: 100%;
  padding: 16px 24px;
  border-radius: 100px;
  background: var(--accent);
  color: var(--bg);
  font-family: 'DM Sans', sans-serif;
  font-size: 15px;
  font-weight: 600;
  border: none;
  cursor: pointer;
  transition: opacity 0.18s, transform 0.14s;
  letter-spacing: 0.01em;
}

.btn-primary:hover:not(:disabled) {
  opacity: 0.88;
}

.btn-primary:active:not(:disabled) {
  transform: scale(0.975);
}

.btn-primary:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

/* Secondary — outlined */
.btn-secondary {
  width: 100%;
  padding: 15px 20px;
  border-radius: 100px;
  background: transparent;
  color: var(--text-2);
  font-family: 'DM Sans', sans-serif;
  font-size: 15px;
  font-weight: 500;
  border: 1px solid var(--border);
  cursor: pointer;
  transition: background 0.18s, transform 0.14s;
}

.btn-secondary:hover {
  background: var(--surface);
}

.btn-secondary:active {
  transform: scale(0.975);
}

/* Green — I'm Home */
.btn-green {
  padding: 16px 48px;
  border-radius: 100px;
  background: var(--green);
  color: var(--bg);
  font-family: 'DM Sans', sans-serif;
  font-size: 16px;
  font-weight: 600;
  border: none;
  cursor: pointer;
  transition: opacity 0.18s, transform 0.14s;
}

.btn-green:hover {
  opacity: 0.88;
}

.btn-green:active {
  transform: scale(0.96);
}

/* Alert / I'm Safe */
.btn-alert {
  padding: 16px 48px;
  border-radius: 100px;
  background: var(--alert);
  color: #fff;
  font-family: 'DM Sans', sans-serif;
  font-size: 16px;
  font-weight: 600;
  border: none;
  cursor: pointer;
  transition: opacity 0.18s, transform 0.14s;
}

.btn-alert:hover:not(:disabled) {
  opacity: 0.88;
}

.btn-alert:active {
  transform: scale(0.96);
}

.btn-alert:disabled {
  opacity: 0.5;
}

/* Emergency — Call 911 */
.btn-emergency {
  width: 100%;
  padding: 16px 24px;
  border-radius: 100px;
  background: #d62828;
  color: #fff;
  font-family: 'DM Sans', sans-serif;
  font-size: 16px;
  font-weight: 700;
  border: none;
  cursor: pointer;
  text-align: center;
  text-decoration: none;
  letter-spacing: 0.02em;
  transition: opacity 0.18s, transform 0.14s;
  box-shadow: 0 0 0 1px rgba(214, 40, 40, 0.3), 0 4px 16px rgba(214, 40, 40, 0.25);
}

.btn-emergency:hover {
  opacity: 0.9;
}

.btn-emergency:active {
  transform: scale(0.975);
}

/* Ghost */
.btn-ghost {
  background: none;
  border: none;
  color: var(--text-3);
  font-family: 'DM Sans', sans-serif;
  font-size: 14px;
  font-weight: 400;
  cursor: pointer;
  padding: 8px 16px;
  transition: color 0.18s;
}

.btn-ghost:hover {
  color: var(--text-2);
}

/* ─────────────────────────────────────────────
   WAVEFORM BARS
───────────────────────────────────────────── */
.wave-bars {
  display: flex;
  align-items: center;
  gap: 4px;
  height: 36px;
}

.wave-bar {
  width: 3px;
  height: 4px;
  border-radius: 2px;
  background: var(--accent);
}

.wave-bars.active .wave-bar:nth-child(1) { animation: waveBar 1.2s ease-in-out infinite 0.00s; }
.wave-bars.active .wave-bar:nth-child(2) { animation: waveBar 1.2s ease-in-out infinite 0.09s; }
.wave-bars.active .wave-bar:nth-child(3) { animation: waveBar 1.2s ease-in-out infinite 0.18s; }
.wave-bars.active .wave-bar:nth-child(4) { animation: waveBar 1.2s ease-in-out infinite 0.27s; }
.wave-bars.active .wave-bar:nth-child(5) { animation: waveBar 1.2s ease-in-out infinite 0.36s; }
.wave-bars.active .wave-bar:nth-child(6) { animation: waveBar 1.2s ease-in-out infinite 0.27s; }
.wave-bars.active .wave-bar:nth-child(7) { animation: waveBar 1.2s ease-in-out infinite 0.18s; }

.wave-bars.alert-bars .wave-bar { background: var(--alert); }

/* ─────────────────────────────────────────────
   BOTTOM NAV
───────────────────────────────────────────── */
.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  display: flex;
  background: var(--bg);
  border-top: 1px solid var(--border);
  padding-bottom: env(safe-area-inset-bottom, 0px);
  z-index: 100;
}

.nav-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 5px;
  padding: 14px 0 12px;
  cursor: pointer;
  color: var(--text-3);
  font-size: 11px;
  font-weight: 500;
  letter-spacing: 0.03em;
  border: none;
  background: none;
  font-family: 'DM Sans', sans-serif;
  transition: color 0.18s;
  position: relative;
}

.nav-item.active {
  color: var(--accent);
}

/* Small dot indicator above active tab */
.nav-item.active::before {
  content: '';
  position: absolute;
  top: 7px;
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background: var(--accent);
}

.nav-icon {
  font-size: 18px;
  line-height: 1;
}

/* ─────────────────────────────────────────────
   STEP COUNTER (onboarding)
───────────────────────────────────────────── */
.step-counter {
  font-size: 12px;
  font-weight: 500;
  color: var(--text-3);
  letter-spacing: 0.04em;
}

/* ─────────────────────────────────────────────
   PILL / TAG
───────────────────────────────────────────── */
.pill {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  padding: 4px 10px;
  border-radius: 100px;
  font-size: 11px;
  font-weight: 500;
}

.pill-accent {
  background: rgba(135, 166, 150, 0.12);
  color: var(--accent);
  border: 1px solid rgba(135, 166, 150, 0.2);
}

.pill-green {
  background: rgba(122, 171, 143, 0.12);
  color: var(--green);
  border: 1px solid rgba(122, 171, 143, 0.18);
}

.pill-alert {
  background: rgba(192, 128, 96, 0.12);
  color: var(--alert);
  border: 1px solid rgba(192, 128, 96, 0.18);
}

.pill-neutral {
  background: var(--surface2);
  color: var(--text-2);
  border: 1px solid var(--border);
}

/* Legacy class aliases used in components */
.pill-purple { background: rgba(135, 166, 150, 0.10); color: var(--accent); border: 1px solid rgba(135, 166, 150, 0.18); }
.pill-amber  { background: rgba(192, 128, 96, 0.10);  color: var(--alert);  border: 1px solid rgba(192, 128, 96, 0.18);  }

/* ─────────────────────────────────────────────
   CARD / SURFACE
───────────────────────────────────────────── */
.card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 16px;
}

/* Legacy glass aliases */
.glass {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 10px;
}

.glass-sm {
  background: var(--surface);
  border: 1px solid var(--border2);
  border-radius: 10px;
}

/* ─────────────────────────────────────────────
   CONTACT CARD
───────────────────────────────────────────── */
.contact-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 14px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* ─────────────────────────────────────────────
   HISTORY ITEM
───────────────────────────────────────────── */
.history-item {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 14px;
  background: var(--surface);
  border: 1px solid var(--border2);
  border-radius: 10px;
  transition: background 0.15s;
}

.history-item:active {
  background: var(--surface2);
}

/* ─────────────────────────────────────────────
   SETTINGS ROW
───────────────────────────────────────────── */
.settings-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 15px 16px;
  background: var(--surface);
  border: 1px solid var(--border2);
  border-radius: 10px;
  cursor: pointer;
  transition: background 0.15s;
}

.settings-row:active {
  background: var(--surface2);
}

/* ─────────────────────────────────────────────
   SECTION HEADER
───────────────────────────────────────────── */
.section-header {
  font-size: 11px;
  font-weight: 500;
  letter-spacing: 0.07em;
  text-transform: uppercase;
  color: var(--text-3);
  margin-bottom: 10px;
  padding: 0 2px;
}

/* ─────────────────────────────────────────────
   HINT BOX
───────────────────────────────────────────── */
.hint-box {
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 14px;
}

/* ─────────────────────────────────────────────
   ELAPSED BADGE
───────────────────────────────────────────── */
.elapsed-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 100px;
  font-size: 13px;
  font-weight: 500;
  color: var(--text-2);
  font-variant-numeric: tabular-nums;
}

/* ─────────────────────────────────────────────
   LOCATION PILL
───────────────────────────────────────────── */
.location-pill {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 100px;
}

/* ─────────────────────────────────────────────
   TOGGLE
───────────────────────────────────────────── */
.toggle {
  width: 44px;
  height: 24px;
  border-radius: 12px;
  position: relative;
  cursor: pointer;
  border: none;
  transition: background 0.22s;
  flex-shrink: 0;
}

.toggle.on  { background: var(--accent); }
.toggle.off { background: var(--surface2); }

.toggle::after {
  content: '';
  position: absolute;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: white;
  top: 3px;
  transition: left 0.22s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.toggle.on::after  { left: 23px; }
.toggle.off::after { left: 3px; }

/* ─────────────────────────────────────────────
   THEME TOGGLE BUTTON
───────────────────────────────────────────── */
.theme-toggle {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text-2);
  font-size: 16px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.18s, color 0.18s;
  flex-shrink: 0;
}

.theme-toggle:hover {
  background: var(--surface2);
  color: var(--text);
}

/* ─────────────────────────────────────────────
   SCROLLBAR — hidden
───────────────────────────────────────────── */
::-webkit-scrollbar { width: 0; height: 0; }
